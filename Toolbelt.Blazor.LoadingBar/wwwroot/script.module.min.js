export var Toolbelt;(function(n){var t;(function(n){class t{constructor(){this.loadingBarTemplate='<div id="loading-bar" style="display:none;"><div class="bar" style="width:0;"><div class="peg"><\/div><\/div><\/div>';this.loadingBarContainer=null;this.loadingBar=null;this.startSize=.02;this.started=!1;this.progress=0;this.latencyThreshold=100;this.reqsTotal=0;this.reqsCompleted=0;this.startTimer={handle:null};this.incrementTimer={handle:null};this.completeTimer={handle:null}}constructDOM(n,t,i,r,u){this.latencyThreshold=u;const f=document;let e=null;if(t!==""){const r=f.head;let n=r.querySelector(`link[href^="${t}"]`);if(n===null){n=f.createElement("link");n.rel="stylesheet";n.href=t+"?v="+i;r.insertAdjacentElement("afterbegin",n);const u=n;e=new Promise(n=>u.onload=()=>{n()})}}e===null&&(e=new Promise(n=>n()));f.documentElement.style.setProperty("--toolbelt-loadingbar-color",n);const o=f.querySelector(r||"body");if(o===null)throw new Error('The container element could not found by selector "'+r+'"');if(o.insertAdjacentHTML("afterbegin",this.loadingBarTemplate),this.loadingBarContainer=f.getElementById("loading-bar"),this.loadingBarContainer!=null){this.loadingBar=this.loadingBarContainer.getElementsByClassName("bar")[0];const n=this.loadingBarContainer;e.then(()=>{n.style.display="block"})}}beginLoading(){this.reqsTotal===0&&this.setTimeout(this.startTimer,()=>this.start(),this.latencyThreshold);this.reqsTotal++;this.setProgress(this.reqsCompleted/this.reqsTotal)}endLoading(){this.reqsCompleted++;this.reqsCompleted>=this.reqsTotal?this.complete():this.setProgress(this.reqsCompleted/this.reqsTotal)}start(){(this.clearTimeout(this.completeTimer),this.started)||(this.started=!0,this.loadingBar!=null&&this.loadingBar.classList.add("in-progress"),this.setProgress(this.startSize,{enableTransition:!1}))}complete(){this.reqsTotal=0;this.reqsCompleted=0;this.clearTimeout(this.startTimer);this.setProgress(1);this.setTimeout(this.completeTimer,()=>{this.loadingBar!=null&&this.loadingBar.classList.remove("in-progress"),this.progress=0,this.started=!1},500)}setProgress(n,t={enableTransition:true}){this.started&&(this.progress=n,this.loadingBar!=null&&(t.enableTransition?this.loadingBar.classList.remove("no-trans"):this.loadingBar.classList.add("no-trans"),this.loadingBar.style.width=n*100+"%"),this.setTimeout(this.incrementTimer,()=>this.incrementProgress(),250))}incrementProgress(){if(!(this.progress>=1)){let t=0;const n=this.progress;t=n>=0&&n<.25?(Math.random()*3+3)/100:n>=.25&&n<.65?Math.random()*3/100:n>=.65&&n<.9?Math.random()/50:n>=.9&&n<.99?.005:0;const i=this.progress+t;this.setProgress(i)}}setTimeout(n,t,i){n.handle!==null&&clearTimeout(n.handle);n.handle=setTimeout(()=>{n.handle=null,t()},i)}clearTimeout(n){n.handle!==null&&(clearTimeout(n.handle),n.handle=null)}}n.LoadingBarClass=t;n.loadingBar=new t})(t=n.Blazor||(n.Blazor={}))})(Toolbelt||(Toolbelt={}));